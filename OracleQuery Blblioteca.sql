CREATE TABLE Pais(
Id_Pais NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Nombre VARCHAR2(50) NOT NULL
);

CREATE TABLE Departamento(
Id_Departamento NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Nombre VARCHAR2(50) NOT NULL,
Id_Pais NUMBER NOT NULL,
CONSTRAINT FK_Departamento_Pais FOREIGN KEY (Id_Pais) REFERENCES Pais(Id_Pais)
ON DELETE CASCADE
);

CREATE TABLE Municipio(
Id_Municipio NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Nombre VARCHAR2(50) NOT NULL,
Id_Departamento NUMBER NOT NULL,
CONSTRAINT FK_Municipio_Departamento FOREIGN KEY (Id_Departamento) REFERENCES Departamento(Id_Departamento)
ON DELETE CASCADE
);

CREATE TABLE Autor(
Id_Autor NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Primer_Nombre VARCHAR2(50) NOT NULL,
Segundo_Nombre VARCHAR2(50),
Primer_Apellido VARCHAR2(50) NOT NULL,
Segundo_Apellido VARCHAR2(50),
Id_Pais NUMBER NOT NULL,
CONSTRAINT FK_Autor_Pais FOREIGN KEY (Id_Pais) REFERENCES Pais(Id_Pais)
ON DELETE CASCADE
);

CREATE TABLE Editorial(
Id_Editorial NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Nombre VARCHAR2(50) NOT NULL,
Id_Pais NUMBER NOT NULL,
CONSTRAINT FK_Editorial_Pais FOREIGN KEY (Id_Pais) REFERENCES Pais(Id_Pais)
ON DELETE CASCADE
);

CREATE TABLE Libro(
Id_Libro NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Titulo VARCHAR2(200) NOT NULL,
Fecha_Publicacion DATE NOT NULL,
ISBN VARCHAR2(20) NOT NULL,
Id_Editorial NUMBER NOT NULL,
CONSTRAINT FK_Libro_Editorial FOREIGN KEY (Id_Editorial) REFERENCES Editorial(Id_Editorial)
ON DELETE CASCADE
);

CREATE TABLE Categoria(
Id_Categoria NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Nombre VARCHAR2(50) NOT NULL
);

CREATE TABLE Miembro(
Id_Miembro NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Primer_Nombre VARCHAR2(50) NOT NULL,
Segundo_Nombre VARCHAR2(50),
Primer_Apellido VARCHAR2(50) NOT NULL,
Segundo_Apellido VARCHAR2(50),
Telefono VARCHAR2(20) NOT NULL,
Fecha_Registro DATE NOT NULL,
Id_Municipio NUMBER NOT NULL,
CONSTRAINT FK_Miembro_Municipio FOREIGN KEY (Id_Municipio) REFERENCES Municipio(Id_Municipio)
ON DELETE CASCADE
);

CREATE TABLE Empleado(
Id_Empleado NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Primer_Nombre VARCHAR2(50) NOT NULL,
Segundo_Nombre VARCHAR2(50),
Primer_Apellido VARCHAR2(50) NOT NULL,
Segundo_Apellido VARCHAR2(50),
Puesto VARCHAR2(50) NOT NULL,
Fecha_Contratacion DATE NOT NULL
);

CREATE TABLE Prestamo(
Id_Prestamo NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Id_Miembro NUMBER NOT NULL,
Id_Empleado NUMBER NOT NULL,
Fecha_Prestamo DATE NOT NULL,
Fecha_Devolucion DATE NOT NULL,
CONSTRAINT FK_Prestamo_Miembro FOREIGN KEY (Id_Miembro) REFERENCES Miembro(Id_Miembro)
ON DELETE CASCADE,
CONSTRAINT FK_Prestamo_Empleado  FOREIGN KEY (Id_Empleado) REFERENCES Empleado(Id_Empleado)
ON DELETE CASCADE
);

CREATE TABLE Libro_Autor(
Id_Libro_Autor NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Id_Libro NUMBER NOT NULL,
Id_Autor NUMBER NOT NULL,
CONSTRAINT FK_Libro_Autor_Libro FOREIGN KEY (Id_Libro) REFERENCES Libro(Id_Libro),
CONSTRAINT FK_Libro_Autor_Autor FOREIGN KEY (Id_Autor) REFERENCES Autor(Id_Autor)
);

CREATE TABLE Libro_Categoria(
Id_Libro_Categoria NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Id_Libro NUMBER NOT NULL,
Id_Categoria NUMBER NOT NULL,
CONSTRAINT FK_Libro_Categoria_Libro FOREIGN KEY (Id_Libro) REFERENCES Libro(Id_Libro)
ON DELETE CASCADE,
CONSTRAINT FK_Libro_Categoria_Categoria FOREIGN KEY (Id_Categoria) REFERENCES Categoria(Id_Categoria)
ON DELETE CASCADE
);

CREATE TABLE Detalle_Prestamo(
Id_Detalle_Prestamo NUMBER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
Id_Prestamo NUMBER NOT NULL,
Id_Libro NUMBER NOT NULL,
CONSTRAINT FK_Detalle_Prestamo_Prestamo FOREIGN KEY (Id_Prestamo) REFERENCES Prestamo(Id_Prestamo),
CONSTRAINT FK_Detalle_Prestamo_Libro FOREIGN KEY (Id_Libro) REFERENCES Libro(Id_Libro)
);